# Сервис subscribe-be
## (Тестовое задание для **Effective Mobile**)

## Стек
  * Go
  * PostgreSQL
  * Fiber
  * sqlc
  * zerolog
  * Docker
  * Docker compose
  * git
  * Make

## Важная информация
Реализация сервиса намеренно несколько усложнена для демонстрации возможной структуры проекта при наличии дополнительных требований. Выделен сервисный слой (в который можно было бы заложить бизнес-логику, но в контексте задания он не требуется), на границах слоёв осуществляется маппинг *DTO <-> domain* и *domain <-> sqlc-структуры*. Логика работы с БД реализована с помощью sqlc и соответствующей кодогенерации на основе запросов в директории sqlc/queries и настроек в sqlc.yaml. Логирование реализовано с помощью zerolog. Сгенерирована swagger-документация.
Основные настройки вынесены в *.env*-файл, пример его оформления в файле *.env.example* в корне проекта.
### Примечания
При создании/обновлении подписок необходимо использовать формат указания дат **"MM-YYYY"** (взят из примера в ТЗ). ID подписок и ID пользователей сохраняются в формате uuid.
Разворачиваемая БД сохраняет данные в volume под названием pg_data_test, указанный в docker-compose.yaml. При первом старте проекта БД заполняется 20 фейковыми записями.

## API Routes
Все маршруты доступны с префиксом /api/v1:
  * GET /swagger/ — Swagger-документация
  * POST /subscription — Создание новой подписки
  * GET /subscription/:id — Получение подписки по ID
  * PUT /subscription/:id — Обновление подписки по ID (опциональные поля)
  * DELETE /subscription/:id — Удаление подписки по ID
  * GET /subscription/ — Получение списка всех подписок (с пагинацией)
  * GET /subscription/filter — Получение списка подписок с фильтром по user_id и/или service_name (с пагинацией)

### Запуск проекта

Клонировать репозиторий:
```bash
git clone git@github.com:Novodremov/subscribe-be.git
```

Перейти в папку с проектом:
```bash
cd subscribe-be
```
Создать .env файл и заполнить его по формату файла .env.example. Если установлена утилита make, доступна команда:
```bash
make env
```
Запуск через Docker Compose (рекомендуемый способ, требуется время для сборки контейнеров):
```bash
docker-compose up --build
```
  * Сервис subscribe-be будет доступен на http://localhost:8080
  * Swagger-документация: http://localhost:8080/api/v1/swagger/

### Автор
*Лысов Алексей*  
Контактная информация:
- Telegram: [@nvdrmv](https://t.me/nvdrmv)
- телефон: +79168610148
- электронная почта: [alexei.lysov@gmail.com](mailto:alexei.lysov@gmail.com)
